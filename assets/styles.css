/* =========================================================
   PLANTGO — CLEAN LIGHT THEME STYLESHEET
   One file. No duplicates. Shared tokens + components.
   ========================================================= */

/* -------------------------
   THEME TOKENS
------------------------- */
:root {
  /* Base */
  --bg: #ffffff;
  --text: #0f172a;            /* slate-900 */
  --muted: #64748b;           /* slate-500 */
  --border: #e5e7eb;          /* gray-200 */
  --surface: #ffffff;
  --surface-2: #f7fafc;       /* subtle bg */
  --shadow: 0 2px 8px rgba(0,0,0,.06);

  /* Brand / accent */
  --accent-500: #16a34a;      /* green-600 */
  --accent-600: #15803d;      /* green-700 */

  /* Buttons */
  --btn-primary-bg: #16a34a;
  --btn-primary-text: #ffffff;
  --btn-primary-bg-hover: #15803d;

  --btn-secondary-bg: #f3f4f6; /* gray-100 */
  --btn-secondary-text: #111827;/* gray-900 */
  --btn-secondary-bg-hover: #e5e7eb;

  /* Points palette (common/rare/epic/legendary) */
  --points-common-bg: #eceff1;      --points-common-fg: #37474f;   /* grey */
  --points-rare-bg: #e6f0ff;        --points-rare-fg: #1e40af;     /* blue */
  --points-epic-bg: #f4e8fb;        --points-epic-fg: #6b21a8;     /* purple */
  --points-legendary-bg: #fff7cc;   --points-legendary-fg: #7a5d00;/* gold */
}

/* -------------------------
   RESET / BASE
------------------------- */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
  background: var(--bg);
  line-height: 1.45;
}
img { max-width: 100%; display: block; }
button, input, select { font: inherit; }
a { color: inherit; text-decoration: none; }

/* Utilities */
.muted { color: var(--muted); }
.app-shell { display: grid; grid-template-rows: auto 1fr; min-height: 100dvh; }

/* -------------------------
   LAYOUT / NAV
------------------------- */
.nav {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 14px; border-bottom: 1px solid var(--border); background: var(--surface);
  position: sticky; top: 0; z-index: 20;
}
.brandmark { font-weight: 800; letter-spacing: .3px; }
.user-area { position: relative; }
.user-btn {
  display: inline-flex; align-items: center; gap: 10px;
  padding: 8px 12px; border: 1px solid var(--border); background: var(--surface);
  border-radius: 12px; box-shadow: var(--shadow); cursor: pointer;
}
.level-badge { font-size: 12px; color: var(--muted); }

.menu {
  position: absolute; right: 0; top: calc(100% + 8px);
  background: var(--surface); border: 1px solid var(--border); border-radius: 12px; box-shadow: var(--shadow);
  min-width: 180px; padding: 6px; z-index: 30;
}
.menu-item {
  display: block; width: 100%; text-align: left; background: transparent; border: 0; cursor: pointer;
  padding: 10px 12px; border-radius: 8px;
}
.menu-item:hover { background: var(--surface-2); }
.menu-item.danger { color: #b91c1c; }

/* -------------------------
   MAIN / CARDS / FORMS / BUTTONS
------------------------- */
main { padding: 16px; }
h1, h2 { margin: 0 0 10px; }
.card {
  background: var(--surface); border: 1px solid var(--border); border-radius: 14px; box-shadow: var(--shadow);
  padding: 12px; margin-bottom: 14px;
}
.form-grid { display: grid; gap: 12px; }
@media (min-width: 720px) { .form-grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (min-width: 1024px){ .form-grid { grid-template-columns: repeat(3, minmax(0,1fr)); } }

button.primary {
  background: var(--btn-primary-bg); color: var(--btn-primary-text); border: 1px solid transparent;
  padding: 10px 14px; border-radius: 10px; cursor: pointer; font-weight: 700;
}
button.primary:hover { background: var(--btn-primary-bg-hover); }
button.secondary {
  background: var(--btn-secondary-bg); color: var(--btn-secondary-text); border: 1px solid var(--border);
  padding: 10px 14px; border-radius: 10px; cursor: pointer; font-weight: 600;
}
.label-file {
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: 10px 14px; border: 1px dashed var(--border); background: var(--surface-2); border-radius: 12px; cursor: pointer;
}
.validation-feedback { margin-top: 6px; color: var(--muted); }

/* -------------------------
   SPECIES / MISSIONS (cards)
------------------------- */
.species-item {
  border: 1px solid var(--border); border-radius: 14px; overflow: hidden; background: var(--surface); box-shadow: var(--shadow);
}
.mission-title { padding: 10px 12px; border-bottom: 1px solid var(--border); font-weight: 700; }
.card-content { display: grid; grid-template-columns: 120px 1fr; gap: 12px; padding: 12px; }
@media (max-width: 480px){ .card-content { grid-template-columns: 1fr; } }

.species-image-container { position: relative; }
.species-image { width: 100%; height: 120px; object-fit: cover; border-radius: 10px; }
.species-info p { margin: 0 0 6px; }
.species-actions { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }

/* Wikipedia thumb badge on species card */
.wiki-thumb {
  position: absolute; bottom: 8px; left: 8px;
  display: grid; grid-template-columns: auto 1fr; gap: 6px; align-items: center;
  background: rgba(255,255,255,.92); border: 1px solid var(--border); border-radius: 12px; padding: 6px; box-shadow: var(--shadow);
}
.wiki-label {
  font-size: 11px; color: var(--muted); padding: 2px 6px; border: 1px solid var(--border); border-radius: 999px;
}
.wiki-img-wrap { width: 46px; height: 46px; border-radius: 8px; overflow: hidden; background: var(--surface-2); display: grid; place-items: center; }
.wiki-img-wrap img { width: 100%; height: 100%; object-fit: cover; }
.wiki-skeleton { width: 100%; height: 100%; background: linear-gradient(90deg,#eee,#f5f5f5,#eee); animation: sk 1.2s infinite; }
@keyframes sk { 0%{background-position:-200px 0} 100%{background-position:200px 0} }
.wiki-missing { font-size: 10px; color: var(--muted); }

/* -------------------------
   HERBARIUM (list)
------------------------- */
.herbarium-item { width: 100%; }
.herbarium-card {
  display: grid; grid-template-columns: 84px 1fr; gap: 12px; align-items: center;
  border: 1px solid var(--border); border-radius: 14px; background: var(--surface); padding: 10px; box-shadow: var(--shadow);
}
.herbarium-img { width: 84px; height: 84px; border-radius: 10px; overflow: hidden; background: var(--surface-2); display: grid; place-items: center; }
.herbarium-img img { width: 100%; height: 100%; object-fit: cover; }
.herbarium-name { margin: 0 0 4px; }
.herbarium-date { margin: 0; font-size: 12px; color: var(--muted); }

/* -------------------------
   MODAL (shared)
------------------------- */
.modal {
  position: fixed; inset: 0; display: grid; place-items: center; background: rgba(15, 23, 42, .35);
  z-index: 50; padding: 12px;
}
.modal-content {
  width: min(720px, 92dvw); background: var(--surface); border: 1px solid var(--border);
  border-radius: 16px; box-shadow: 0 24px 72px rgba(0,0,0,.18); padding: 12px; position: relative;
}
.modal .close { position: absolute; right: 14px; top: 10px; border: 0; background: transparent; font-size: 22px; cursor: pointer; }

/* Result modal specifics */
.result-head { display: flex; flex-direction: column; gap: 8px; margin-bottom: 8px; }
.result-body { display: grid; gap: 14px; }
.result-actions { display:flex; justify-content:center; margin-top: 4px; }

/* -------------------------
   LEVEL BAR (top of result modal)
------------------------- */
.level-wrap.at-top { margin-bottom: 10px; }
.level-line { display:flex; justify-content: space-between; font-size: 14px; color: var(--muted); }
.progress-rail { height: 10px; background:#eef2f7; border-radius: 999px; overflow: hidden; }
.progress-bar  { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent-500), var(--accent-600)); }

/* Level-up pulse */
.result-modal .modal-content.result.levelup { animation: levelPulse .8s ease; box-shadow: 0 20px 60px rgba(16,185,129,.25); }
@keyframes levelPulse {
  0%{ transform: scale(1); } 40%{ transform: scale(1.02); } 100%{ transform: scale(1); }
}

/* -------------------------
   LOADING BAR (clean indeterminate)
------------------------- */
.loading-track {
  width: 100%; height: 8px; border-radius: 999px; background: #eef2f7; overflow: hidden;
}
.loading-indeterminate {
  height: 100%; width: 35%;
  background: linear-gradient(90deg, rgba(16,185,129,.15), rgba(16,185,129,.6), rgba(16,185,129,.15));
  border-radius: inherit;
  animation: indet 1.8s ease-in-out infinite;
}
@keyframes indet {
  0%   { transform: translateX(-120%); }
  50%  { transform: translateX(25%); }
  100% { transform: translateX(160%); }
}

/* -------------------------
   USER PHOTOS (centered strip)
------------------------- */
.user-photos.center { display:flex; gap: 10px; flex-wrap: wrap; justify-content: center; align-items: center; }
.user-photos .shot { width: 84px; height: 84px; border-radius: 12px; overflow: hidden; border: 1px solid var(--border); background: var(--surface-2); }
.user-photos .shot img { width: 100%; height: 100%; object-fit: cover; }

/* -------------------------
   POINTS PILL + MISSION LEVEL (unified)
   Same shape for all rarities. Only color changes.
   Epic/Legendary have subtle sheen only.
------------------------- */
.points-badge,
.mission-level {
  position: relative; overflow: hidden;
  display: inline-flex; align-items: center; gap: 10px;
  padding: 8px 12px; border: 1px solid var(--border); border-radius: 12px;
  font-weight: 800; line-height: 1; box-shadow: var(--shadow);
}
.points-badge .label, .mission-level .label { font-size: 12px; color: var(--text); opacity: .7; }
.points-badge .value, .mission-level .value { font-size: 18px; }

/* Colors — original palette */
.common-points    { background: var(--points-common-bg);    color: var(--points-common-fg); }
.rare-points      { background: var(--points-rare-bg);      color: var(--points-rare-fg); }
.epic-points      { background: var(--points-epic-bg);      color: var(--points-epic-fg); }
.legendary-points { background: var(--points-legendary-bg); color: var(--points-legendary-fg); }

/* Sheen only on epic/legendary — no extra rounding */
.epic-points::after,
.legendary-points::after {
  content: ""; position: absolute; inset: 0; border-radius: inherit; pointer-events: none;
  background: linear-gradient(110deg, transparent 0%, rgba(255,255,255,.7) 45%, transparent 60%);
  background-size: 250% 100%; animation: sheen 2.8s linear infinite; opacity: .55;
}
@keyframes sheen { 0%{background-position:-150% 0} 60%{background-position:150% 0} 100%{background-position:150% 0} }

/* Extra air on result so details don’t overlap the pill */
.result-points .points-badge { margin-bottom: 14px; }

/* -------------------------
   BONUS BADGES (mission/new)
------------------------- */
.badges { display:flex; gap: 12px; flex-wrap: wrap; justify-content: center; margin-top: 14px; }
.badge {
  opacity: 0; transform: translateY(12px) scale(.96);
  background: #fff; border: 1px solid var(--border); border-radius: 12px;
  padding: 10px 14px; font-weight: 800; box-shadow: var(--shadow);
  display: inline-flex; gap: 8px; align-items: center;
}
.badge.in { animation: badge-in .6s ease-out forwards; }
@keyframes badge-in {
  0% { opacity:0; transform: translateY(12px) scale(.92); }
  50%{ opacity:1; transform: translateY(-2px) scale(1.05); }
  100%{ opacity:1; transform: translateY(0) scale(1); }
}

/* -------------------------
   DETAILS LINES (results)
------------------------- */
.details { display: grid; gap: 6px; }
.detail-line {
  display: flex; justify-content: space-between; align-items: center;
  padding: 6px 8px; border: 1px solid var(--border); border-radius: 10px; background: var(--surface-2);
  font-size: 14px;
}

/* -------------------------
   END
------------------------- */
